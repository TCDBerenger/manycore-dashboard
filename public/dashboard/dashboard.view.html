
<!-- -- -- -- -- -- -- -- -- -- -- -- -->
<!--	Wizard						  -->
<!-- -- -- -- -- -- -- -- -- -- -- -- -->
<div class="wizard alert alert-info" ng-class="{'hidden': ! canAddProfile()}">
	
	<!-- Step analyse -->
	<div class="tile" ng-if="false && isStepAnalyse()">
		<span class="tile-icon fa-stack">
			<i class="fa fa-circle fa-stack-2x"></i>
			<i class="fa fa-hand-o-right fa-stack-1x text-info"></i>
		</span>
		<h2><strong>Step 2</strong> find Waldo</h2>
		<p>Check all the indicators. <i class="fa fa-question-circle" style="cursor: help;" tooltip-html="stepTooltipAnalyse"></i></p>
		<!--<div>
			<span class="label label-info" style="margin-right: 6px;">info</span>
			<p style="display: inline-block; vertical-align: text-top;">
				<span class="text-success">green</span>: it works!<br />
				<span class="text-primary">blue</span>: area for improvement<br />
				<span class="text-danger">red</span>, <span class="text-warning">yellow</span> and <span class="text-muted">all other colours</span>: possible problem
			</p>
		</div>-->
		<p>If an indicator seems dubious, click on it to show detailled information and follow the investigation.</p>
	</div>
	
	<!-- Step 1 and 1bis (selection) -->
	<div class="tile">
		<span class="tile-icon fa-stack">
			<i class="fa fa-circle fa-stack-2x"></i>
			<i class="fa fa-hand-o-right fa-stack-1x text-info"></i>
		</span>
		<h2 ng-if="isStep1()"><strong>Step 1</strong> select a sample</h2>
		<h2 ng-if="isStep1Compare()"><strong>Step 1 bis</strong> compare</h2>
		<p>&nbsp;</p>
		<p style="text-size: 14px">Profiles with all gathered data:</p>
		<p class="profile-group">
			<button type="button" class="btn btn-primary btn-xs" ng-click="selectProfile(profile)" ng-repeat="profile in profiles | enabled | v5 | orderBy : 'label'" uib-tooltip="{{::profile.desc}}" ng-disabled="isSelected(profile)">{{::profile.label}}</button>
			<!-- ng-class="{'btn-primary': profile.version == 5, 'btn-default': profile.version == 4, 'btn-link': profile.version == 3}" -->
		</p>
		<p style="text-size: 14px">Profiles without memory bandwidth nor cache coherency misses:</p>
		<p class="profile-group">
			<button type="button" class="btn btn-primary btn-xs" ng-click="selectProfile(profile)" ng-repeat="profile in profiles | enabled | v4 | orderBy : 'label'" uib-tooltip="{{::profile.desc}}" ng-disabled="isSelected(profile)">{{::profile.label}}</button>
		</p>
		<p style="text-size: 14px">Profiles without locks, memory bandwidth nor cache coherency misses:</p>
		<p class="profile-group">
			<button type="button" class="btn btn-primary btn-xs" ng-click="selectProfile(profile)" ng-repeat="profile in profiles | enabled | v3 | orderBy : 'label'" uib-tooltip="{{::profile.desc}}" ng-disabled="isSelected(profile)">{{::profile.label}}</button>
		</p>
		<p><i class="fa fa-info-circle"></i> tooltip is available when a description of the profile is provided</p>
	</div>
</div>

<!-- -- -- -- -- -- -- -- -- -- -- -- -->
<!--	Profiles & categories		  -->
<!-- -- -- -- -- -- -- -- -- -- -- -- -->
<div class="row heading">
	<ng-include src="'/template_profile.html'" ng-if="willProfile(0)" ng-init="pindex = 0" class="category-profile-0"></ng-include>
	
	<!-- Main -->
	<div class="col-xs-6"><div class="row">
		<!-- Step 1 (welcome message) -->
		<div ng-if="isStep1()" class="col-xs-10 col-xs-offset-2" style="margin-top: 7%;"><div class="block block-imp">
			<span class="block-icon fa-stack">
				<i class="fa fa-circle fa-stack-2x"></i>
				<i class="fa fa-hand-spock-o fa-stack-1x fa-inverse"></i>
			</span>
			<h2>Hi again</h2>
			<p><strong class="text-info"><i class="fa fa-hand-o-right"></i> Start.</strong> To begin, select your first sample on the right.</p>
			<p>
				Be careful, this tool is created for a research purpose and is in constant evolution.
				Graphs could contain some mistakes and data could be miscomputed.
				To keep your experience simple and due to complex data harvesting, most of data are presented with a time frame, either 50 ms, or customisable.
			</p>
		</div></div>
		
		<!-- Global help -->
		<div ng-if="isStepAnalyse()" class="col-xs-10 col-xs-offset-1">
			<!-- Step 2 -->
			<div ng-if="! hoveredCategory && ! hoveredStrip" class="block block-list">
				<span class="block-icon fa-stack text-info">
					<i class="fa fa-circle fa-stack-2x"></i>
					<i class="fa fa-info fa-stack-1x fa-inverse"></i>
				</span>
				<h2>What's next?</h2>
				<p><i class="fa fa-arrow-right text-info"></i> Check all indicators and gauges to identify an overflowing one.</p>
				<p><i class="fa fa-arrow-right text-info"></i> Choose a category of problems to drill-down.</p>
				<p><i class="fa fa-graduation-cap text-info"></i> for experts: <a ui-sref='raw({ids: encodeSelectedProfile()})'>check the raw data</a></p>
			</div>
			
			<!-- Help on categories -->
			<div ng-if="hoveredCategory && ! hoveredStrip" class="block">
				<span class="block-icon fa-stack text-muted">
					<i class="fa fa-circle fa-stack-2x"></i>
					<i class="fa fa-{{hoveredCategory.icon}} fa-stack-1x fa-inverse"></i>
				</span>
				<h2>{{hoveredCategory.title}}</h2>
				<p>{{hoveredCategory.description}}</p>
				<p>{{hoveredCategory.example}}</p>
			</div>
			
			<!-- Help on strips -->
			<div ng-if="hoveredStrip" class="block">
				<span class="block-icon fa-stack" style="color: {{hoveredStrip.facet.colours.n}}">
					<i class="fa fa-circle fa-stack-2x"></i>
					<i class="fa fa-area-chart fa-stack-1x fa-inverse"></i>
				</span>
				<h2>{{hoveredStrip.title}}</h2>
				<p>{{hoveredStrip.description}}</p>
				<p>{{hoveredStrip.example}}</p>
			</div>
		</div>
		
		<!-- Step analyse -->
		<!--<div ng-if="has2Profiles()" class="col-auto" style="max-width: 425px;"><div class="block">
			<span class="block-icon fa-stack text-info">
				<i class="fa fa-circle fa-stack-2x"></i>
				<i class="fa fa-hand-o-right fa-stack-1x fa-inverse"></i>
			</span>
			<h2><strong class="text-info">Step 2</strong> find Waldo</h2>
			<p>Check all the indicators. <i class="text-info fa fa-question-circle" style="cursor: help;" tooltip-html="stepTooltipAnalyse"></i></p>
			<p>If an indicator seems dubious, click on it to show detailled information and follow the investigation.</p>
		</div></div>-->
		
		<!-- Category -->
		<!--<div ng-if="has2Profiles()" class="col-auto"><div class="block">
			<span class="block-icon fa-stack">
				<i class="fa fa-circle fa-stack-2x"></i>
				<i class="fa fa-eye fa-stack-1x fa-inverse"></i>
			</span>
			<h2>Quick access</h2>
			<div class="category-group">
				<a ui-sref='detail({cat: category.tag, ids: encodeSelectedProfile()})' ng-repeat="category in categories | enabled"><button type="button" class="btn btn-link btn-xs"><i class="fa fa-{{::category.icon}}"></i>{{::category.title}}</button></a>
			</div>
		</div></div>-->
		
		<!-- Control -->
		<!--
		<div ng-if="has2Profiles()" class="col-auto ctrl"><div class="block">
			<span class="block-icon fa-stack">
				<i class="fa fa-circle fa-stack-2x"></i>
				<i class="fa fa-wrench fa-stack-1x fa-inverse"></i>
			</span>
			<p><a class="action" href ng-click="unselectAllProfiles()">
				<span class="fa-stack icon">
					<i class="fa fa-thumb-tack fa-stack-1x"></i>
					<i class="fa fa-ban fa-stack-2x"></i>
				</span><span class="text">deselect all</span>
			</a></p>
			<p><a class="action" href ng-click="invertProfiles()">
				<span class="fa-stack icon">
					<i class="fa fa-circle fa-stack-2x"></i>
					<i class="fa fa-exchange fa-stack-1x fa-inverse"></i>
				</span><span class="text">invert</span>
			</a></p>
		</div></div>
		-->
	</div></div>
	
	<ng-include src="'/template_profile.html'" ng-if="willProfile(1)" ng-init="pindex = 1" class="category-profile-1"></ng-include>
</div>

<div class="row category div-link" ng-if="hasProfiles()" ng-repeat="category in categories | enabled" ui-sref='detail({cat: category.tag, ids: encodeSelectedProfile()})' ng-mouseenter="selectCategory(category)" ng-mouseleave="unselectCategory()">
	<!--<span id="div-tooltip-{{::$index}}" class="div-tooltip">view {{::category.title}} details <i class="fa fa-external-link"></i></span> ng-mousemove="categoryTooltipMouseMoveHandler($event, $index)"-->
	
	<!-- Strips (profile 1) -->
	<ng-include src="'/template_profile_strips.html'" ng-init="pindex = 0" class="category-profile-0"></ng-include>
	
	<!-- Main -->
	<div class="col-xs-6 category-main">
		<!-- Title -->
		<!--<div class="title" ng-class="{'for1': has1Profile(), 'for2': has2Profiles()}">
			<hr/><i class="fa fa-{{::category.icon}} text-muted"></i><span>{{::category.title}}</span><i class="fa fa-{{category.icon}} text-muted"></i><hr/>
		</div>-->
		<div class="title" ng-class="{'for1': has1Profile(), 'for2': has2Profiles()}"><hr/><span>{{::category.title}}</span><hr/></div>
		
		<!-- Gauges -->
		<chart-gauges class="widget-graph"></chart-gauges>
	</div>
		
	<!-- Strips (profile 2) -->
	<ng-include src="'/template_profile_strips.html'" ng-if="has2Profiles()" ng-init="pindex = 1" class="category-profile-1"></ng-include>
</div>

<!-- Profiles -->
<script type="text/ng-template" id="/template_profile.html">
	<!-- Waiting -->
	<div ng-if="waitProfile(pindex)" class="col-xs-3 ctrl"><div class="block">
		<span class="block-icon fa-stack">
			<i class="fa fa-circle fa-stack-2x"></i>
			<i class="fa fa-spinner fa-pulse fa-stack-1x fa-inverse"></i>
		</span>
		<strong>Retrieving data...</strong>
	</div></div>
	
	<!-- Profile -->
	<div ng-if="hasProfile(pindex)" class="col-xs-3 profile hovermodal"><div class="tile" ng-init="profile = selectedProfiles[pindex]">
		
		<!-- pin -->
		<aside class="hover-text">
			<a href ng-click="unselectProfile(profile)">
				<span class="text">deselect</span><span class="fa-stack fa-lg icon">
					<i class="fa fa-thumb-tack fa-stack-1x"></i>
					<i class="fa fa-ban fa-stack-2x"></i>
				</span>
			</a><br />
			<a href ng-click="invertProfiles()" ng-if="has2Profiles()">
				<span class="text">invert</span><span class="fa-stack fa-lg icon">
					<i class="fa fa-circle fa-stack-2x"></i>
					<i class="fa fa-exchange fa-stack-1x fa-inverse"></i>
				</span>
			</a>
		</aside>
		
		<!-- main -->
		<section class="title">
			<h2>{{iProfile().label}}</h2>
			<p class="subtitle" tooltip="{{iProfile().desc}}" tooltip-placement="bottom">
				{{iProfile().desc}}
			</p>
		</section>
		
		<!-- Sequence -->
		<section class="sequence">
			<chart-sequence class="widget-graph"></chart-sequence>
		</section>
	</div>

	<!-- Running -->
	<div class="tile">
		<section class="strip" ng-repeat="strip in commonCategory.strips">
            <span class="strip-gauge" style="color: {{::strip.facet.colours.n}}">{{selectedProfiles[pindex].data.dash.gauges[strip.facet.attr].l}}</span>
			<chart-strip class="widget-graph" ng-mouseenter="$parent.selectStrip(strip)" ng-mouseleave="$parent.unselectStrip()"></chart-strip>
		</section>
	</div></div>
</script>

<!-- Profiles - strips -->
<script type="text/ng-template" id="/template_profile_strips.html">
	<div class="col-xs-3 profile"><div class="tile">
		<section class="strip" ng-repeat="strip in category.strips">
            <span class="strip-gauge" style="color: {{::strip.facet.colours.n}}">{{selectedProfiles[pindex].data.dash.gauges[strip.facet.attr].l}}</span>
			<chart-strip ng-if="isStripCapable()" class="widget-graph" ng-mouseenter="$parent.selectStrip(strip)" ng-mouseleave="$parent.unselectStrip()"></chart-strip>
			<div class="no-strip" ng-if="! isStripCapable()" style="color: {{::strip.facet.colours.n}}">
				Missing data for {{::strip.title}}
			</div>
		</section>
	</div></div>
</script>