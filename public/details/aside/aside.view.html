<tabset>
	<tab>
		<tab-heading><i class="fa fa-bar-chart"></i> Legend</tab-heading>
		<table class="table table-striped table-hover table-legend">
			<thead>
				<tr>
					<th></th>
					<th colspan="2" ng-repeat="profile in profiles">{{profile.label}}</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="(i, e) in widget.deck.data | reverse">
					<td class="legend-col-label">
						<span class="legend-dot" style="color: {{e.color}}" ng-if="e.colors == null">▮</span>
						<span class="legend-dot" ng-if="e.colors != null">
							<span style="color: {{e.colors[0]}}">◤</span>
							<span style="color: {{e.colors[1]}}">◢</span>
						</span>
						<strong>{{e.title}}</strong>: {{e.desc}}
					</td>
					<td class="legend-col-p1">{{data[profiles[0].id].stats[e.cat][e.attr] | number: 0}}{{e.unity != null | iif : ' ' + e.unity : ''}}</td>
					<td class="legend-col-stats" class="container-graph" rowspan="{{widget.deck.data.length}}" colspan="{{profiles.length}}" ng-if="i == 0">
						<chart-stats class="integrated-graph"></chart-stats>
					</td>
					<td class="legend-col-p2" ng-if="profiles.length >= 2">{{data[profiles[1].id].stats[e.cat][e.attr] | number: 0}}{{e.unity != null | iif : ' ' + e.unity : ''}}</td>
				</tr>
				<tr ng-repeat="(i, e) in widget.deck.legend">
					<td class="legend-col-label" colspan="{{1 + 2 * profiles.length}}">
						<span class="legend-dot" style="color: {{e.color}}" ng-if="e.colors == null">▮</span>
						<span class="legend-dot" ng-if="e.colors != null">
							<span style="color: {{e.colors[0]}}">◤</span>
							<span style="color: {{e.colors[1]}}">◢</span>
						</span>
						<strong>{{e.title}}</strong>: {{e.desc}}
					</td>
				</tr>
			</tbody>
		</table>
	</tab>
	<tab>
		<tab-heading><i class="fa fa-medkit"></i> Help</tab-heading>
		<p class="clues-label">
			Clues about troubleshooting:
		</p>
		<ul class="legend-list" style="font-size: 0.85em;">
			<li id="cli{{widget.id}}{{$index}}" ng-repeat="clue in widget.deck.clues">
				<style>#cli{{widget.id}}{{$index}}:before { content: "▮ "; color: {{clue.color}}; }</style>
				<strong>{{clue.tax}}</strong>: {{clue.text}}
			</li>
		</ul>
		<p ng-if="widget.deck.clues.length == 0">
			<i>Sorry, nothing yet.</i>
		</p>
	</tab>
	<tab disable='widget.deck.settings.length == 0'>
		<tab-heading><i class="fa fa-sliders"></i> Settings</tab-heading>
		<div class="settings" ng-repeat="setting in widget.deck.settings">
			<div class="setting setting-range" ng-if="setting.type == 'range'">
				<label>{{setting.label}}:</label>
				<input type="range" ng-model="widget.settings[setting.property]" min="{{::setting.min}}" max="{{::setting.max}}" step="{{::setting.step}}" ng-disabled="widget.settings[setting.depends] === false" />
				[<span>{{widget.settings[setting.property]}}</span>] <span>{{setting.unit}}</span>
			</div>
			<div class="setting setting-flag" ng-if="setting.type == 'flag'">
				<label>{{setting.label}}:</label>
				<input type="checkbox" ng-model="widget.settings[setting.property]" ng-disabled="widget.settings[setting.depends] === false" />
			</div>
		</div>
	</tab>
</tabset>